import os
import time

full_art = r"""














                                                                                   ...........                                                                        
                                                                            ..-+%@@@@@%######***++-..                                                                 
                                                                  ..-+#%@@@@@@@@@@@@@@@@@@@@@@@%%%%##*+=..                                                            
                                                               .:%@@@@@@@@@@@@@@@@@%@%@@@@@@@@@@@@@@@@%%##*+:.                                                        
                                                             .+@@@@@@@@@@@%###********@@@@@%%%%##**#%@@@@@@%#*+:.                                                     
                                                          .:**+*%@@@@%##***+++++++++++@@@@@@@@@@@%%%%#**+*#@@@%#*=:.                                                  
                                                       ..=--=*@@@%#****+++++==========@@@@@@@@@@@@@@@%%%%%*=--#@%%#+-.                                                
                                                     .-----*@@#*****++++++==========-=@@@@@@@@@@@@@@@@@@%%%%#*=::*#**=-.                                              
                                                  .::--=*%#****++++++++======---------@@@@@@@@@@@@@@@@@@@@@%%%#+-..:-===-.                                            
                                               ..::--+%%***+++++++++++=====-------::::@@@@@@@@@@@@@@@@@@@@@@%%#*=.....:=+=:.                                          
                                             .:::--#%#***++++++++++++=====----::::::..@@@@@@@@@@@@@@@@@@@@@@@@%#+:......=++=:                                         
                                            .:::-#%****+++++++++++++=====----:::::....%@@@@@@@@@@@@@@@@@@@@@@@@%#+-......-**+=.                                       
                                          .:::-*%#***++++++========+=====----:::......@@@@@@@@@@@@@@@@@@@@@@@@@@%%*=......-##+=.                                      
                                         .:::-%#**++++++=================----:::......@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#+-:...:-##*=-                                     
                                        .:::=%***+++++====================---:::......@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%#*+=---=%#+=-                                    
                                       ::::+%**+++++=======================---::::....@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%#*+==*%#+=-.                                  
                                      .:::*%**++++=========================----::::...@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%#*+++#%#++=.                                 
                                     .:::=%*+++++=========-------============----::::.@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%#*++*@%*+*=                                 
                                    .:::-%++++++=======-----------==============-----:@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%**++%%#*=-:.                               
                                   .::.:#*+++++=====---------------===============----@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%#**+%@%#+=--.                              
                                  .::.:*#+++++=====-----------------================--@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%##**#@%#**=--.                             
                                  .::.:%+++++====-------------------===============---@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%#**#@@%###=-:                             
                                 .:...*#+++++====------------------==================-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%##**@@%##@+==.                            
                                 ....-%*++++======================================----@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%#**@@@%%@#++-.                           
                                 ---------=======++++**#######****+++++++++++=========@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%###@@@%@@%+*+.                           
                               .:...::::::+#@@@@%##***++++++++++++++==================@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%###@@@%@@@*++:                           
                              ....:::::-*@@@%##***+++++++++++++++========-------======@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%###@@@@@@@*++=.                          
                             ....:::::=@@@%#***++++++++++++++++=======--------------==@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%###@@@@@@@*=-=..                         
                            ......::=%@%##***++++++++++++++++=======-----------------=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%###@@@@@%@*---.....                      
                           ......::#@%#****+++++++++++++++++======-----:::::::--------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%#%@@@@@%@#:::-:.....                    
                          ......:#@%****+++++++++++++++++++=====----::::::::::::------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%@@@@%#@#..:==--:.:                    
                         ......=%%#**++++++++++++++++++++======---:::::...::::::------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%@@@@%*@#...+***+==.                   
                        ......*@%**++++++++++++++++++++======----:::.......:::::------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%@@@@%*@#...+%#****.                   
                       .....-%%**+++++++++++++++++=+========---:::..........::::------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%@@@@@%=%*...++#@%##:                   
                     .:+=-.*%#++++++++=====================---:::.........::::::------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@%-#*...==++#@#:                   
                    .:+++%##*+++========-===============----:::...........::::::------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@%-**...=-=+++%:                   
                   .-*+*=#%@@@@%%%*=:......::::---------::::.............:::::::------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-**...=--==++.                   
                  .:=+=*-*%@@@#+%@@%%%%%%%%##**++=++====-::.............::-----::::::-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-**...=---==+.                   
                  -=+--+:+%@@@#+%@@%#**=-...::-=**#%@@@@@@@@@%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=**...=---===.                   
                  =--:.-:-#@@@%+%@@%##*+-.....:=++##%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=**...=:---==.                   
                 .-:...:.:=%@@%+%@@%%#*+=.....:-=+*#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=#+...=:---=-                    
                 ..:......-#@@%+%@@%%#*+=......-=+*#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=#+..:=----=:                    
                 .........-*@@%+#@@%%#*+=......:=+*#%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=#=..:=----=:                    
                 ..:......-*%@%*#@@@%#*+-:.....:-+*#%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=%+..------=.                    
                 ..:......-+%@%**@@@%#*+=:... .:-=+*#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=%=..=-----=.                    
                 ..-.....:-+%@%#*@@@%%#+=:.....:-=+*#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=%=..=----=+                     
                 .-=:..-:.-=#@@#*@@@@%#+=-.....:-=+*#%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=#:.:=----==                     
                  +==.:=:::+*%@#*@@@@%#*+-.....:-=+*#%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#+#:.-=----=:                     
                  +++-=*%+:==%@%*@@@@%#*+=:....:-=+*#%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@***..------=.                     
                  ..=+=#%%-==#@%*@@@@%#*+=:....:-=+*##%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*%=.:=---:-=                      
                   .:+=*#@+--*@%#%@@@%%#*+-....:-=+**#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+%-.:=--:-=-                      
                    .:=*#%*-=-@%%%@@@@%#*+=....:-=++*#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+%:.-=--:-=.                      
                     .:=#%%-++%@%@@@@@%#*+=:..::-=++*#%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#+#..==----+.                      
                      .-*##=*%@@@@@@@@%#*+=:..::-==+*#%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#*+.:+----==                       
                        :**++=+#@@@@@@@#**+-..::--=+*##%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+#:.:+----=.                       
                             .:+=+#@@@@@@%+=..::--=+*##%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=*..-+----=.                       
                                 .=-.-#%#*%@@@#=--=++*#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%--+=---==                        
                                    -#+:.:=+**#%@@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*#*=---=:                        
                                    .:.:+#*=:..:-+*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#+*+----=.                        
                                    .-:...#==+*##*+===----=++*##%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%++++---==                         
                                     ::...#%+++*******###*+=-::::::-------------------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*+++=---=-                         
                                     .::..-@++=**=++*****#***#@@%*++==+*#%%%%%*++=====@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#=*-+=---+.                         
                                     .-:...%*+=++=+++++++===%%%%#*+==++***#*=========-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#=*=-+=--==.                         
                                      .:::.-%+++*+++++++=--=====------:---=====-------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*+*=-=+=--+-                          
                                       -:::.%*++++++++++=-:-=-==---------------:::----@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+#*=-:*+--=+.                          
                                       :::::-@++++++++++==--=--=----------------------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@**#*+=-:#+-=++.                          
                                        :::::+%++++++++++=-------::-------------------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@**%***+-::*+++:.                           
                                         :::::%#+++++++++==------:::::----------------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%**%%****=-:-.                                
                                          .:::-@*++++++++==--=--::::::::--------------@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#*+*@%****+=-::                                 
                                           .-::*@++++++++===--::::::::::--------------@@@@@@@@@@@@@@@@@@@@@@@@@@@%*=-=++#@@****+=-:-.                                 
                                            .-:-%%+++=+=====--::::::::--------::::::::@@@@@@@@%%%%%%%%%@%%#*+=::::::=++*%@%****+=-:.                                  
                                              .--%*+++=======-::::::::--******++++++++===--:::::.........:::::::.::=+++#@@#****=--:                                   
                                               .=-%*+++======-:::::::::-@@@@@@@@@@@@@@+++++======----:::::::.....::+++*@@%****+=--                                    
                                                 .=%++++=====-:::::::::-=+****########++=======----::::.........::=+++#@@**#*+=-:                                     
                                                  .-+++=====--::::::::::::::::-------:======-----::::...........:-=++*@@#****==.                                      
                                                    .+++====--::::::::::::::::::::::::-==------:::::...........::=++*%@%****+=.                                       
                                                      :*+===--::-=::::::::::::::::::::------::::::.............::++*#@@*#**+=                                         
                                                       .=+==--:.:#=:::::::::::::::::::----:::::::.............::=+++@@#*#*+.                                          
                                                         .+==-:.:==::..:::::::::::::::---:::::::.............::-===#@%***.                                            
                                                           :==-.:-+:::::::........::::--:::::::.............:::---+@%##.                                              
                                                            .--:..+-..............:::.:-:::::::.............:::--+@%+.                                                
                                                              .=:.==..::::............::::::::.............::::-=#-                                                   
                                                                .=#::----------------:::::::::.............:::=:.                                                     
                                                                  ..+==---------------:::::::.....::....::..                                                          
                                                                        ..........................                                                                    
"""


trtn = r"""
___________    .__              .__       .__                             .__                    __  .__                            __  .__               
\__    ___/___ |  |   _______  _|__| _____|__| ____   ____   _______ __ __|  |   ____   ______ _/  |_|  |__   ____     ____ _____ _/  |_|__| ____   ____  
  |    |_/ __ \|  | _/ __ \  \/ /  |/  ___/  |/  _ \ /    \  \_  __ \  |  \  | _/ __ \ /  ___/ \   __\  |  \_/ __ \   /    \\__  \\   __\  |/  _ \ /    \ 
  |    |\  ___/|  |_\  ___/\   /|  |\___ \|  (  <_> )   |  \  |  | \/  |  /  |_\  ___/ \___ \   |  | |   Y  \  ___/  |   |  \/ __ \|  | |  (  <_> )   |  \
  |____| \___  >____/\___  >\_/ |__/____  >__|\____/|___|  /  |__|  |____/|____/\___  >____  >  |__| |___|  /\___  > |___|  (____  /__| |__|\____/|___|  /
             \/          \/             \/               \/                         \/     \/             \/     \/       \/     \/                    \/ 
"""



SPLIT_COL = 88
LEFT_PAD = " " * SPLIT_COL

# ----------- TIMELINE -----------
# Put timestamps (in seconds) and which helmet to show.
# Replace these with the real times from the song.
timeline = [
    (0.00, "left"),
    (5.58, "right"),
    (7.84, "left"),
    (13.27, "right"),
    (15.40, "left"),
    (20.81, "right"),
    (23.07, "left"),
    (28.47, "right"),
    (29.98, "left"),
]

# ===========================
#  SETUP
# ===========================

# Split into left and right art
lines = full_art.splitlines()

left_art = "\n".join(line[:SPLIT_COL] for line in lines)
right_art = "\n".join(LEFT_PAD + line[SPLIT_COL:] for line in lines)

# Fast clear using ANSI
def clear():
    print("\033c", end="", flush=True)

printed_lyrics = []   # stores all past lyrics
LYRIC_COL_WIDTH = 40

# displays the frame with the corresponding lyric
def show_frame(art, new_lyric):
    clear()

    # Add the lyric to the list
    if new_lyric:
        printed_lyrics.append(new_lyric)

    # Build left lyric column as a single block
    lyric_block = ""
    for line in printed_lyrics:
        lyric_block += line + "\n"

    # Print lyrics on the left in a fixed-width column
    lyric_lines = lyric_block.splitlines()
    art_lines = art.splitlines()

    # Merge left lyric column + right ASCII art
    for i in range(max(len(lyric_lines), len(art_lines))):
        left_part = lyric_lines[i] if i < len(lyric_lines) else ""
        left_part = left_part.ljust(LYRIC_COL_WIDTH)

        right_part = art_lines[i] if i < len(art_lines) else ""

        print(left_part + right_part)



# Ensure the timeline is sorted by time
timeline.sort()

# ===========================
#  RUNTIME LOOP
# ===========================

BEAT = 60/126

def run_animation():
    clear()
    print("Waiting for music... Press ENTER exactly when the song starts.")
    input()

    start_time = time.time()
    event_index = 0
    total_events = len(timeline)

    while event_index < total_events:
        now = time.time() - start_time
        event_time, which = timeline[event_index]

        if now >= event_time:
            clear()
            if which == "left":
                print(left_art)
            else:
                print(right_art)

            event_index += 1
        else:
            time.sleep(0.01)

    # End animation: flash full art in time with beat
    while True:
        clear()
        print(full_art)
        time.sleep(BEAT)

        clear()
        time.sleep(BEAT)

run_animation()